# -*- coding: utf-8 -*-
"""Retails_deplo.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1y-A_RmFGoSXeV4B_d2-EzZXfe9qfCh66
"""

import numpy as np
import pandas as pd
import  joblib
import streamlit as st

model=joblib.load('Retail_Sales_TotalAmount_prediction_model.pkl')

df = pd.read_csv("retail_sales_dataset.csv")   # SAME dataset used for training
st.set_page_config(page_title='Retail Total Amount Prediction', layout='centered')

st.title('Retail Sales Total Amount Prediction App')
st.write("Enter a valid Transaction ID to get prediction")

transaction_id = st.number_input(
    'Transaction ID',
    min_value=1,
    step=1
)

if st.button('Predict Total Amount'):

    if transaction_id not in df["Transaction ID"].values:
        # üëá THIS MESSAGE SHOWS ON SCREEN
        st.error("‚ùå Transaction ID is not valid")
    else:
        row = df[df["Transaction ID"] == transaction_id].iloc[0]
        input_data = np.array([[transaction_id, row["Age"], row["Quantity"]]])
        total_amount = model.predict(input_data)[0]
        st.success(f"Predicted Total Amount: ‚Çπ{total_amount:.2f}")
